<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Snippets &amp; examples | Multisite Language Switcher</title>
    <meta name="description" content="Simple, powerful and easy to use">
    <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.0f2a7d36.css" as="style"><link rel="preload" href="/assets/js/app.138272fa.js" as="script"><link rel="preload" href="/assets/js/4.d04c1941.js" as="script"><link rel="prefetch" href="/assets/js/2.065f523a.js"><link rel="prefetch" href="/assets/js/3.64b6542b.js"><link rel="prefetch" href="/assets/js/5.2dfbc805.js"><link rel="prefetch" href="/assets/js/6.48630f0e.js"><link rel="prefetch" href="/assets/js/7.e6f794bc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0f2a7d36.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="Multisite Language Switcher" class="logo"> <span class="site-name can-hide">Multisite Language Switcher</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://wordpress.org/plugins/multisite-language-switcher/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Plugin Directory
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/lloc/multisite-language-switcher" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github Repository
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://wordpress.org/plugins/multisite-language-switcher/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Plugin Directory
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/lloc/multisite-language-switcher" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github Repository
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">Home</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>User documentation</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Developer docs</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/developer-docs/snippets-examples.html" class="active sidebar-link">Snippets &amp; examples</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developer-docs/snippets-examples.html#get-the-current-language" class="sidebar-link">Get the current language</a></li><li class="sidebar-sub-header"><a href="/developer-docs/snippets-examples.html#manipulate-the-nav-menu" class="sidebar-link">Manipulate the Nav Menu</a></li><li class="sidebar-sub-header"><a href="/developer-docs/snippets-examples.html#the-blog-collection" class="sidebar-link">The blog collection</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="snippets-examples"><a href="#snippets-examples" aria-hidden="true" class="header-anchor">#</a> Snippets &amp; examples</h1> <p>Most people are likely to use the widget provided by the Multisite Language Switcher. But the dynamic sidebars are not always the best place for the output of the plugin.</p> <blockquote><p>Please keep in mind: Always backup your files and database prior to work on your site, better safe than sorry.</p></blockquote> <p><em>If you look for explanations of the basic functions, classes and methods of the plugin, then head over to <a href="/user-docs/">this page</a>.</em></p> <h2 id="get-the-current-language"><a href="#get-the-current-language" aria-hidden="true" class="header-anchor">#</a> Get the current language</h2> <p>You should use the function get_locale() provided by WordPress if you want to know the language of the current blog.</p> <p>The Multisite Language Switcher has also a similar functionality that sets the language to ‘en_US’ in case it is empty.</p> <pre><code>use lloc\Msls\MslsBlogCollection;
​
$blog     = MslsBlogCollection::instance()-&gt;get_current_blog();
$language = $blog-&gt;get_language(); // en_US
$alpha2   = $blog-&gt;get_alpha2(); // en
</code></pre> <h2 id="manipulate-the-nav-menu"><a href="#manipulate-the-nav-menu" aria-hidden="true" class="header-anchor">#</a> Manipulate the Nav Menu</h2> <p>The class MslsOutput comes in handy when you’d like to manipulate the items of a Navigation Menu. First you should check if plugin is active (just check for the existence of function ‘the_msls’) and if it is the primary menu in your theme (the name can vary). Then you can create the object and request the array of links (in my example just linked flags) to the translations. After that you can create the output, add it to $items and return it.</p> <p>Here comes a simplified version of the add-on MslsMenu:</p> <pre><code>function my_custom_menu_item( $items, $args ) {
    if ( function_exists ( 'the_msls' ) &amp;&amp; 'primary' == $args-&gt;theme_location ) {
        $obj = new lloc\Msls\MslsOutput::init();
        $arr = $obj-&gt;get( 2 );
        if ( !empty( $arr ) ) {
            $items .= '&lt;li&gt;' . implode( '&lt;/li&gt;&lt;li&gt;', $arr ) . '&lt;/li&gt;';
        }
    }
    return $items;
}
add_filter( 'wp_nav_menu_items', 'my_custom_menu_item', 10, 2 );
</code></pre> <p>You could pass - of course - other values different from 2. Here is a list with all possibilities:</p> <pre><code>/* MslsLink - Image + text */
$arr = $obj-&gt;get( 0 );

/* MslsLinkTextOnly - Just text	*/
$arr = $obj-&gt;get( 1 );

/* MslsLinkImageOnly - Just image */
$arr = $obj-&gt;get( 2 );

/* MslsLinkTextImage - Text + image */
$arr = $obj-&gt;get( 3 );
</code></pre> <h2 id="the-blog-collection"><a href="#the-blog-collection" aria-hidden="true" class="header-anchor">#</a> The blog collection</h2> <p>If you want to use the collection of blogs - which created the plugin - in your functions (and filters) you could write code like this:</p> <pre><code>use lloc\Msls\MslsBlogCollection;
​
function my_print_something() {
    foreach ( MslsBlogCollection::instance()-&gt;get() as $blog ) {
        printf(
            '&lt;link rel=&quot;alternate&quot; hreflang=&quot;%1$s&quot; href=&quot;http://%1$s.example.com/&quot; /&gt;',
            $blog-&gt;get_language()
        );
    }
}
add_action( 'wp_head', 'my_print_something' );`
</code></pre> <p>The above example prints the link references to your blogs in all html headers of the output. This is just a simplified version of what the plugin already does.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/lloc/multisite-language-switcher/edit/master/docs/developer-docs/snippets-examples.md" target="_blank" rel="noopener noreferrer">Help me improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/user-docs/install-multisite.html" class="prev">
          Install a multisite environment
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.138272fa.js" defer></script><script src="/assets/js/4.d04c1941.js" defer></script>
  </body>
</html>
